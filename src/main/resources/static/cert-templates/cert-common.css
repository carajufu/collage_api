/* =========================================================================
 * Smart LMS — 증명서 공통 CSS (openhtmltopdf 전용)
 *
 * [코드 의도]
 * - A4 PDF에서 모든 증명서 템플릿을 동일 레이아웃으로 렌더.
 * - 머릿말/꼬릿말(러닝 헤더/푸터), 페이지 번호, 표 헤더 반복, 분할 안정 제공.
 * - 직인(seal)과 하단 라인 충돌 방지. 절대 positioned footer 제거.
 *
 * [데이터 흐름]
 * - HTML 템플릿(cert-templates/*.html) → 본 CSS 적용 → openhtmltopdf 렌더 → PDF.
 * - 헤더/푸터는 DOM 내 .page-header/.page-footer를 element()로 추출하여 각 페이지에 배치.
 *
 * [계약]
 * - 필수 DOM 클래스: .page-header, .page-footer, .cert-border, .issuer-block 등.
 * - XHTML 준수(모든 태그 닫힘). 잘못된 마크업은 렌더 실패.
 *
 * [보안·안전 전제]
 * - 본 CSS는 시각 레이어만 정의. 문서 위변조 방지는 별도 검증번호/워터마크 정책에 따름.
 *
 * [유지보수 가이드]
 * - 페이지 여백/직인 위치 미세조정은 아래 @page margin, .seal-img의 top/translate로 조절.
 * - openhtmltopdf 호환 범위 내 속성만 사용(CSS2.1 + 일부 Paged Media).
 *
 * [근거]
 * - openhtmltopdf docs: margin boxes(@page + element()), table-header-group, page-break
 * ========================================================================= */

/* ----- A4 페이지 + 러닝 헤더/푸터 + 페이지 번호 ----- */
@page {
  size: A4;
  margin: 18mm 15mm 22mm 15mm;       /* 하단 22mm로 푸터 공간 확보 */
  @top-center   { content: element(pageHeader); }
  @bottom-left  { content: element(pageFooter); }
  @bottom-right { content: "Page " counter(page) " / " counter(pages); }
}

/* ----- 전역 타이포그래피/레이아웃 ----- */
body {
  font-family: "NanumGothic","Noto Sans KR","Malgun Gothic",sans-serif;
  font-size: 12pt;
  line-height: 1.5;
  color: #000;
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  box-sizing: border-box;
}

/* ----- 러닝 머릿말/꼬릿말(HTML에 1회만 배치) -----
   HTML 예)
   <div class="page-header">* 본 문서는 전자적으로 생성된 증명서입니다.</div>
   <div class="page-footer">* 원본확인: https://example.university</div> */
.page-header {
  position: running(pageHeader);
  font-size: 9pt;
  line-height: 1.4;
  text-align: right;
  border-bottom: 1px solid #000;
  padding: 2mm 0;
}
.page-footer {
  position: running(pageFooter);
  font-size: 9pt;
  line-height: 1.4;
  text-align: left;
  border-top: 1px solid #000;
  padding: 2mm 0;
}

/* ----- 문서 외곽 박스(실제 증명서 테두리) ----- */
.cert-border {
  border: 1px solid #000;
  /* min-height 제거: 강제 단일 페이지화 방지 */
  padding: 12mm 15mm;
  position: relative;
  box-sizing: border-box;
}

/* =========================================================================
 * 상단 식별/제목
 * ========================================================================= */
.cert-header { font-size: 10pt; line-height: 1.4; margin-bottom: 10mm; }
.cert-header .verify-no { margin-bottom: 2mm; font-weight: 400; word-break: keep-all; }

.doc-title {
  text-align: center;
  font-size: 20pt;
  font-weight: 600;
  letter-spacing: 4px;
  line-height: 1.3;
  word-break: keep-all;
  margin: 20mm 0 15mm 0;
}

/* =========================================================================
 * 학생 정보
 * ========================================================================= */
.info-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: auto;
  font-size: 12pt;
  line-height: 1.8;
  margin-bottom: 15mm;
}
.info-table td.label {
  width: 40mm;
  vertical-align: top;
  padding: 1mm 2mm;
  font-weight: 400;
  word-break: keep-all;
  text-align: left;
}
.info-table td.value {
  vertical-align: top;
  padding: 1mm 2mm;
  font-weight: 400;
  word-break: break-word;
  text-align: left;
}
/* 성명(영문) 1행 */
.info-table .name-row .label {
  width: 40mm;
  padding: 1mm 2mm;
  white-space: nowrap;        /* "성    명(영문) :" 공백 유지 */
}
.info-table .name-row .value {
  padding: 1mm 2mm;
  white-space: nowrap;        /* 이름 줄바꿈 방지 */
}
.name-kor { font-weight: 600; }
.name-eng { font-weight: 400; letter-spacing: .5px; text-transform: uppercase; white-space: nowrap; }
.no-wrap  { white-space: nowrap; word-break: keep-all; display: inline-block; overflow: visible; }

/* =========================================================================
 * 성적 테이블
 * ========================================================================= */
.score-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
  font-size: 11pt;
  line-height: 1.5;
  margin: 10mm 0;
  border-top: 1px solid #000;
  border-bottom: 1px solid #000;
}
/* thead 반복 출력 */
.score-table thead { display: table-header-group; }
.score-table tbody { display: table-row-group; }

.score-table thead th {
  border-bottom: 1px solid #000;
  padding: 2mm;
  font-weight: 600;
  text-align: center;
  word-break: keep-all;
}
.score-table tbody td {
  padding: 2mm;
  font-weight: 400;
  text-align: center;
  word-break: break-word;
  border-bottom: .5px solid #888;
}
.score-summary { font-size: 11pt; line-height: 1.5; margin-bottom: 15mm; }

/* 분할 제어 유틸 */
.avoid-break        { break-inside: avoid; page-break-inside: avoid; }
.page-break-before  { break-before: page; page-break-before: always; }

/* =========================================================================
 * 본문 확인 문구 / 발급일
 * ========================================================================= */
.cert-statement {
  text-align: center;
  margin: 20mm 0 8mm;
  font-size: 12pt;
  line-height: 1.5;
  font-weight: 400;
  word-break: keep-all;
}
.issue-date {
  text-align: center;
  font-size: 12pt;
  line-height: 1.4;
  margin-bottom: 12mm;
  font-weight: 400;
  word-break: keep-all;
}

/* =========================================================================
 * 발급 기관 블록(서명/직인)
 *  - 학교명과 "총장 ○○" 베이스라인 정렬
 *  - 직인은 총장 텍스트 위에만 겹침. 하단 라인/푸터와는 충돌 없음
 * ========================================================================= */
.issuer-block {
  text-align: center;
  position: static;                 /* 흐름에 두어 분할 안정 */
  margin: 12mm 0 10mm;              /* 푸터 라인과 안전 간격 */
  font-size: 14pt;
  line-height: 1.6;
  font-weight: 400;
  letter-spacing: 3px;
  word-break: keep-all;
}
.issuer-line {
  display: inline-flex;
  align-items: baseline;
  gap: 4mm;
  white-space: nowrap;
  line-height: 1.4;
  position: relative;
}
.univ-name { font-weight: 600; font-size: 14pt; line-height: 1.4; letter-spacing: 3px; white-space: nowrap; }
.chancellor-block { position: relative; display: inline-block; font-weight: 600; font-size: 14pt; line-height: 1.4; letter-spacing: 3px; white-space: nowrap; }
.chancellor-inline { position: relative; z-index: 1; white-space: nowrap; }

/* 직인 위치 — 필요 시 translate X/Y만 조정 */
.chancellor-block .seal-img {
  position: absolute;
  top: -12mm;                 /* 기존 -8mm → -12mm: 하단 라인과 더 멀게 */
  left: 0;
  width: 28mm;
  height: 28mm;
  object-fit: contain;
  z-index: 2;                 /* 텍스트 위에 표시 */
  transform: translate(65px, 0);   /* 좌우 미세 조정 */
}

/* =========================================================================
 * 하단 안내 박스(유효성 검증 안내)
 *  - 절대 위치 제거. 문서 흐름에 배치 → 페이지 넘어가면 자동 분할
 * ========================================================================= */
.footer-box {
  font-size: 9pt;
  line-height: 1.5;
  border-top: 1px solid #000;
  padding-top: 3mm;
  word-break: keep-all;
}
.footer-box p {
  margin: 0 0 2mm 0;
  text-indent: -10pt;     /* 불릿 유사 효과 */
  padding-left: 10pt;
  font-weight: 400;
  line-height: 1.5;
  word-break: break-word;
}
