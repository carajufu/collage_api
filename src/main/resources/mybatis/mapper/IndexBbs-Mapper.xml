<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.ac.collage_api.mapper.IndexBbsMapper">

    <!--
      INDEX 메인 페이지 게시판 요약 조회 매퍼
      - 의도: 공지/행사/학술 등 메인에 노출할 게시글 상단 N개를 단일 쿼리로 조회.
      - 데이터 흐름: IndexBbsMapper.selectMainBbsList(bbsCode)
      										 → IndexBbsVO 매핑
      										 → 서비스/컨트롤러.
      - 계약: 유효한 bbsCode(1=공지, 2=행사, 3=학술/논문 등)를 넣으면 최신 5건 반환.
    -->
<<<<<<< Updated upstream
<<<<<<< Updated upstream
    <resultMap id="IndexBbsMap" type="kr.ac.collage_api.vo.IndexBbsVO">
=======
    <resultMap id="IndexBbsMap" type="kr.ac.collage_api.index.vo.IndexBbsVO">
>>>>>>> Stashed changes
=======
    <resultMap id="IndexBbsMap" type="kr.ac.collage_api.index.vo.IndexBbsVO">
>>>>>>> Stashed changes
        <id     property="bbscttNo"       column="BBSCTT_NO"/>
        <result property="bbsCode"        column="BBS_CODE"/>
        <result property="bbsNm"          column="BBS_NM"/>
        <result property="fileGroupNo"  column="FILE_GROUP_NO"/>
        <result property="bbscttSj"       column="BBSCTT_SJ"/>
        <result property="bbscttCn"       column="BBSCTT_CN"/>
        <result property="bbscttWritngDe" column="BBSCTT_WRITNG_DE"/>
        <result property="bbscttRdcnt"    column="BBSCTT_RDCNT"/>
    </resultMap>

    <!--
      INDEX 메인용 게시글 목록 조회
      - 입력: #{bbsCode} (1/2/3 등 게시판 코드)
      - 출력: 게시글 번호, 게시판명, 제목, 내용, 작성일, 조회수 (최신 5건)
      - 정렬 기준: 작성일 내림차순
    -->
    <select id="selectMainBbsList" resultMap="IndexBbsMap">
        SELECT
            c.BBSCTT_NO,
            c.BBS_CODE,
            b.BBS_NM,
            c.FILE_GROUP_NO,
            c.BBSCTT_SJ,
            c.BBSCTT_CN,
            c.BBSCTT_WRITNG_DE,
            c.BBSCTT_RDCNT
        FROM BBS_CTT c
        JOIN BBS b
          ON c.BBS_CODE = b.BBS_CODE
        WHERE c.BBS_CODE = #{bbsCode}
        ORDER BY c.BBSCTT_WRITNG_DE DESC
    </select>

</mapper>
